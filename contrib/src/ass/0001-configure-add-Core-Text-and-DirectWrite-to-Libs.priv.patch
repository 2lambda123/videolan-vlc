From c0eefb7633ed21ebf8c030f7a870ff5e5005e821 Mon Sep 17 00:00:00 2001
From: Oleg Oshmyan <chortos@inbox.lv>
Date: Sat, 18 Sep 2021 03:04:15 +0300
Subject: [PATCH 3/4] configure: add Core Text and DirectWrite to Libs.private

Fixes https://github.com/libass/libass/issues/211.
---
 configure.ac | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/configure.ac b/configure.ac
index 345a445..97abea9 100644
--- a/configure.ac
+++ b/configure.ac
@@ -118,6 +118,7 @@ AS_IF([test "x$enable_coretext" != xno], [
             [[CTFontDescriptorCopyAttribute(NULL, kCTFontURLAttribute);]]
         )
     ], [
+        pkg_libs="$pkg_libs -framework ApplicationServices -framework CoreFoundation"
         LIBS="$LIBS -framework ApplicationServices -framework CoreFoundation"
         AC_DEFINE(CONFIG_CORETEXT, 1, [found CoreText in ApplicationServices framework])
         coretext=true
@@ -129,6 +130,7 @@ AS_IF([test "x$enable_coretext" != xno], [
                 [[CTFontDescriptorCopyAttribute(NULL, kCTFontURLAttribute);]]
             )
         ], [
+            pkg_libs="$pkg_libs -framework CoreText -framework CoreFoundation"
             LIBS="$LIBS -framework CoreText -framework CoreFoundation"
             AC_DEFINE(CONFIG_CORETEXT, 1, [found CoreText framework])
             coretext=true
@@ -160,12 +162,14 @@ AS_IF([test "x$enable_directwrite" != xno], [
         ], [
             # WinRT/UWP/app build: GDI and LoadLibrary are
             # unavailable, but DirectWrite is always present
+            pkg_libs="$pkg_libs -ldwrite"
             LIBS="$LIBS -ldwrite"
             AC_DEFINE(CONFIG_DIRECTWRITE, 1, [found DirectWrite (WinRT/UWP)])
             AC_MSG_RESULT([no])
         ], [
             # Win32/desktop build: GDI is always present;
             # DirectWrite is optional but can be loaded via LoadLibrary
+            pkg_libs="$pkg_libs -lgdi32"
             LIBS="$LIBS -lgdi32"
             AC_DEFINE(CONFIG_DIRECTWRITE, 1, [found DirectWrite and GDI (Win32)])
             AC_MSG_RESULT([yes])
-- 
2.27.0.windows.1

